# Goal Design & Intent Modeling

## ゴールを受け取ったとき

ゴールを受け取ったら、実装前に以下の5項目が揃っているか確認せよ。
揃っていない項目があれば、実装を始める前に選択肢を提示して埋めよ。

```
目的:         なぜこれを解くのか・なぜ今なのか
解かないこと: 今回スコープ外にするもの
制約:         技術・時間・既存システムとの整合性
最低限:       目的達成に不可欠な要素のみ
検証基準:     WHEN [条件] THEN [期待動作] の形式で書けること
```

**検証基準が書けない = 探索フェーズ未完了。** 実装せず、まず選択肢を出せ。

## HitLを挟む判断基準

以下のときだけ確認を求めよ。それ以外は自律実行せよ。

- インターフェース・スキーマ・API境界を新設・変更するとき（コントラクト確定）
- 後述の「未確定ドメイン（U）」に触れる実装をするとき
- 明示されたゴールと選好ログ（L）が矛盾しているとき

## 選好ログ（L）と未確定ドメイン（U）

このファイルまたはプロジェクトの `CLAUDE.md` に以下のセクションがあれば従え。

```
## 選好ログ（L）
- [ドメイン]: [確定した選好]

## 未確定ドメイン（U）
- [まだ選好が定まっていない領域]
```

**Uに触れたとき:** 実装前に必ずプローブを投げよ。

## プローブのルール

プローブは直感を引き出す形式にせよ。分析を強制するな。

```
✓ 「AとBどちらが好みですか？（理由不要）」
✓ 「このネーミング、違和感ありますか？(y/n)」
✗ 「この実装についてどう思いますか？」
✗ 「AとBのどちらが要件を満たしていますか？」
```

一度に聞くプローブは1つ。理由は求めるな。

## セッション終了プロトコル（MUST）

タスク完了後、必ず以下を実行せよ。実行しないと次のセッションがゼロから始まる。

1. このセッションで選好に関わる判断をした箇所を特定する
2. `選好ログ（L）` の該当ドメインを更新する
3. `未確定ドメイン（U）` から解決済みの項目を削除する
